<!--  Partial for rendering the input dropdowns for filtering content in ossembly pages. 
      Css is in Filter_bar.css.scss-->
<div id="filter_container" class="">
  <div class="col-tier"> 
    <!-- Begin - FILTER SCORES:   -->
    <div id="main_filter_dropdown" class="dropdown filter_dd">
      <button id="main_filter_btn" class="ms_main_ml btn 
      <%= current_page?(city_ossembly_path(@city)) ? "alt-action" : "action" %>
      dropdown-toggle" type="button" id="scores_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Select a Forum Topic from the dropdown to navigate to that page. Forum Topics have subtopics inside them.">
        <% if current_page?(city_ossembly_path(@city)) %>
          Filter Forum
        <% elsif current_page?(city_topic_path(@city, @lets_talk)) %>
           <span class="text-xmedium"><i class='fas fa-bullhorn'></i>Let's Talk</span>
        <% elsif current_page?(city_topic_path(@city, @good_vibes)) %>
           <span class="text-xmedium"><i class='fas fa-hand-peace'></i>Good Vibes</span>
        <% elsif current_page?(city_topic_path(@city, @city_affairs)) %>
           <span class="text-xmedium"><i class='fas fa-gavel'></i>City Affairs</span>
        <% elsif current_page?(controller: 'subtopics', action: 'show') %>
          <%= display_topic_filter_title %>
        <% else %>
          Filter Forum
        <% end %>
      </button>
      <div class="dropdown-menu" aria-labelledby="scores_dropdown">
        <p class="dropdown-header"> 
          <%= link_to "Forum Topics", city_ossembly_path(@city), class: "" %>
        </p>
        <div class="dropdown-divider"></div>
        <%= link_to "<i class='fas fa-bullhorn'></i> Let's Talk".html_safe, city_topic_path(@city, @lets_talk), id: " " , class: "dropdown-item" %>
        <hr>
        <%= link_to "<i class='fas fa-hand-peace'></i>Good Vibes".html_safe, city_topic_path(@city, @good_vibes), id: " " , class: "dropdown-item" %>
        <hr>
        <%= link_to "<i class='fas fa-gavel'></i>City Affairs".html_safe, city_topic_path(@city, @city_affairs), id: " " , class: "dropdown-item" %>
      </div>
    </div>
    <!-- End - FILTER SCORES:   -->
    <% unless current_page?(city_ossembly_path(@city)) %> <!--  Makes sure the current page checks don't run on Ossembly Index -->
      <% if current_page?(city_topic_path(@city, @lets_talk)) %>
        <!-- Begin - FILTER Let's Talk:  On Let's Talk topic page -->
        <div class="dropdown" title="Select a Let's Talk Subtopic.">
          <button class="btn alt-action dropdown-toggle" type="button" id="filter_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span style="position: relative; top: -1px">Filter Subtopics</span>
          </button>
          <div class="dropdown-menu" aria-labelledby="filter_dropdown">
            <p class="dropdown-header"> 
              Let's Talk Subtopics
            </p>
            <div class="dropdown-divider"></div>
            <%= link_to "<i class='fas fa-handshake'></i>Help Me Out".html_safe, subtopic_path(@city, @lets_talk, @help_out), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fas fa-building'></i>Business Buzz".html_safe, subtopic_path(@city, @lets_talk, @business_buzz), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fab fa-whmcs'></i>Grinds My Gears".html_safe, subtopic_path(@city, @lets_talk, @grinds_gears), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fas fa-football-ball'></i>Sports".html_safe, subtopic_path(@city, @lets_talk, @sports), class: "dropdown-item" %>
          </div>
        </div>
        <!-- End - FILTER Lets Talk: -->
      <% elsif current_page?(city_topic_path(@city, @good_vibes)) %> 
        <!-- Begin - FILTER Good Vibes:  On Good Vibes topic page -->
        <div class="dropdown" title="Select a Good Vibes Subtopic.">
          <button class="btn alt-action dropdown-toggle" type="button" id="filter_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Filter Subtopics
          </button>
          <div class="dropdown-menu" aria-labelledby="filter_dropdown">
            <p class="dropdown-header"> 
              Good Vibes Subtopics
            </p>
            <div class="dropdown-divider"></div>
            <%= link_to "<i class='fas fa-smile'></i>Good News".html_safe, subtopic_path(@city, @good_vibes, @good_news), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fas fa-bone'></i>Furry Friends".html_safe, subtopic_path(@city, @good_vibes, @furry_friends), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fas fa-camera-retro'></i>City Snaps".html_safe, subtopic_path(@city, @good_vibes, @city_snaps), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fas fa-atlas'></i>Local Historian".html_safe, subtopic_path(@city, @good_vibes, @local_historian), class: "dropdown-item" %>
          </div>
        </div>
        <!-- End - FILTER Good Vibes: -->
      <% elsif current_page?(city_topic_path(@city, @city_affairs))  %> 
        <!-- Begin - FILTER City Affairds:  On City Affairs topic page -->
        <div class="dropdown" title="Select a City Affairs Subtopic.">
          <button class="btn alt-action dropdown-toggle" type="button" id="filter_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Filter Subtopics
          </button>
          <div class="dropdown-menu" aria-labelledby="filter_dropdown">
            <p class="dropdown-header"> 
              City Affairs Subtopics
            </p>
            <div class="dropdown-divider"></div>
            <%= link_to "<i class='fas fa-newspaper'></i>Ballots".html_safe, subtopic_path(@city, @city_affairs, @ballots), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fas fa-calendar-alt'></i>Events".html_safe, subtopic_path(@city, @city_affairs, @events), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fas fa-road'></i>City Improvements".html_safe, subtopic_path(@city, @city_affairs, @city_improvements), class: "dropdown-item" %>
            <hr>
            <%= link_to "<i class='fas fa-school'></i>Schools".html_safe, subtopic_path(@city, @city_affairs, @schools), class: "dropdown-item" %>
          </div>
        </div>
        <!-- End - FILTER City Affairs: -->
      <% elsif current_page?(controller: "subtopics", action: 'show') %>
        <!-- Begin - FILTER SUBTOPICS SHOW:  On subtopics show, onlky dropdown here is to navigate to other subtopics -->
        <div class="dropdown" title="Filter Petitions by Process: Needs Signatures, which are petitions awaiting signatures to be filed to the city for review, and Filed & Sent, which are petitions that have been sent to the city for review.">
          <button class="btn action dropdown-toggle" type="button" id="filter_dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <%= display_subtopic_button_title %>
          </button>
          <div class="dropdown-menu" aria-labelledby="filter_dropdown">
            <p class="dropdown-header"> 
              <%= display_subtopic_dropdown_header %> Subtopics
            </p>
            <div class="dropdown-divider"></div>
            <!-- Below -  Renders the different subtopic links depending on topic. -->
            <%= render 'filters/subtopic_links' %>
          </div>
        </div>
        <!-- End - FILTER SUBTOPICS show: -->
      <% end %> <!--  End - Check of Ossembly child pages -->
    <% end %> <!-- End -  Check of Ossembly main page -->
  </div>
</div>